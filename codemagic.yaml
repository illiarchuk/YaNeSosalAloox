workflows:
  ios-build:
    name: iOS build
    scripts:
      - name: Install .NET SDK (macOS)
        script: |
          # Устанавливаем Homebrew, если он еще не установлен
          if ! command -v brew &>/dev/null; then
            echo "Homebrew not found. Installing Homebrew..."
            /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
          fi
          # Устанавливаем .NET SDK через Homebrew
          brew install --cask dotnet-sdk

      - name: Verify .NET SDK installation
        script: |
          # Проверяем установку .NET SDK
          dotnet --version

      - name: Install .NET workloads
        script: |
          dotnet workload install maui-ios
          dotnet workload install maui-tizen
          dotnet workload restore

      - name: Restore dependencies
        script: dotnet restore YaNeSosalAloo.iOS/YaNeSosalAloo.iOS.csproj

      - name: Build iOS project
        script: dotnet build YaNeSosalAloo.iOS/YaNeSosalAloo.iOS.csproj --configuration Release

    artifacts:
      - build/ios/**/*.app
